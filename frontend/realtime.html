<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ุงููุนุงูุฌ ุงูููุณู ุงูุนูุงูู ุงูุตูุชู</title>
  <style>/* (your CSS unchanged) */</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>๐ค ุงููุนุงูุฌ ุงูููุณู ุงูุนูุงูู</h1>
      <p>ุฏุนู ููุณู ุจุงูุตูุช ุจุงูููุฌุฉ ุงูุนูุงููุฉ</p>
    </div>

    <div id="emergency-banner" class="emergency-banner">
      <strong>โ๏ธ ุชู ุฑุตุฏ ุญุงูุฉ ุทูุงุฑุฆ</strong><br/>ุฅุฐุง ููุช ูู ุฎุทุฑ ููุฑูุ ุงุชุตู ุจุงูุฑูู 999
    </div>
    <div id="emergency-contacts" class="emergency-contacts">
      <strong>๐ ุฃุฑูุงู ุงููุณุงุนุฏุฉ:</strong><br/>ุฎุท ุงููุณุงุนุฏุฉ ุงูููุณูุฉ: 80077<br/>ุงูุทูุงุฑุฆ: 999
    </div>

    <div id="status" class="status connecting">
      <div class="loading"></div> ุฌุงุฑู ุงูุงุชุตุงู ุจุงูุฎุงุฏู...
    </div>

    <div class="voice-controls">
      <button id="recordButton" class="voice-button" disabled>๐ค</button>
      <div class="help-text">ุงุถุบุท ููุชุณุฌูู ูุงูุชุญุฏุซ</div>
    </div>

    <div class="text-controls">
      <input type="text" id="textInput" class="text-input" placeholder="ุฃู ุงูุชุจ ุฑุณุงูุชู ููุง..." disabled/>
      <button id="sendButton" class="send-button" disabled>ุฅุฑุณุงู</button>
    </div>

    <div id="conversation" class="conversation">
      <div class="message bot">
        ูุฑุญุจุงู ุจู. ุฃูุง ููุง ููุงุณุชูุงุน ุฅููู ููุณุงุนุฏุชู. ููู ุญุงูู ุงููููุ
      </div>
    </div>

    <div class="help-text">๐ก ููููู ุงูุชุญุฏุซ ุจุงูุตูุช ุฃู ุงููุชุงุจุฉ. ุฌููุน ุงููุญุงุฏุซุงุช ุณุฑูุฉ ููุญููุฉ.</div>
  </div>

<script>
  const API_HOST = "localhost:8000"; // change only if your backend uses a different host:port

  // inside your class, replace connect() with:
  connect() {
    const proto = (location.protocol === "https:") ? "wss" : "ws";
    const wsUrl = `${proto}://${API_HOST}/ws/${this.sessionId}`;
    this.ws = new WebSocket(wsUrl);

    this.ws.onopen = () => {
      this.updateStatus('connected', 'โ ูุชุตู - ุฌุงูุฒ ูููุญุงุฏุซุฉ');
      this.enable();
    };
    this.ws.onclose = () => {
      this.updateStatus('error', 'โ ุงููุทุน ุงูุงุชุตุงู - ุฅุนุงุฏุฉ ุงููุญุงููุฉ...');
      this.disable();
      setTimeout(() => this.connect(), 2000);
    };
    this.ws.onerror = (e) => {
      console.error("WS error:", e);
      this.updateStatus('error','โ ุฎุทุฃ ูู ุงูุงุชุตุงู');
      this.disable();
    };
    this.ws.onmessage = (ev) => this.handleMessage(JSON.parse(ev.data));
  }
</script>

</body>
</html>
